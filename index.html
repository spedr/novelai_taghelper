<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ai Art Taghelper</title>
    <script src="https://raw.githack.com/SortableJS/Sortable/master/Sortable.js"></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/css/star-rating.min.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  </head>
<body>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/js/star-rating.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <div class="container mt-3">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

        <div class="text center row">
          <div class="col-sm">
            <div id="simpleList" class="list-group col">
                <div class="list-group-item rating" ondblclick="this.contentEditable=true;this.className='list-group-item';" onblur="this.contentEditable=false;this.className='list-group-item';" contenteditable="false">Tag <input id="input-id" type="text" class="hide_rating" data-size="xs" ></div>
                <div class="list-group-item" ondblclick="this.contentEditable=true;this.className='list-group-item';" onblur="this.contentEditable=false;this.className='list-group-item';" contenteditable="false">Tag</div>
            </div>
          </div>
          <div class="col-sm">
            <button type="button" class="add-el btn btn-light" title="Append a tag to the list">+</button>
            <button type="button" class="copyclipboard btn btn-light" title="Copy prompt to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-code" viewBox="0 0 16 16">
                <path d="M5.854 4.854a.5.5 0 1 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L2.707 8l3.147-3.146zm4.292 0a.5.5 0 0 1 .708-.708l3.5 3.5a.5.5 0 0 1 0 .708l-3.5 3.5a.5.5 0 0 1-.708-.708L13.293 8l-3.147-3.146z"/>
              </svg></button>
            <button type="button" class="cleartags btn btn-light" title="Clear all tags"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
              <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
            </svg></button>
            <div class="row">
                <div class="input-group mb-3 mt-2">
                    <div class="input-group-prepend">
                      <button id="readtext" class="btn btn-outline-secondary" type="button" title="Import tags from text"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-90deg-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1.146 4.854a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H12.5A2.5 2.5 0 0 1 15 6.5v8a.5.5 0 0 1-1 0v-8A1.5 1.5 0 0 0 12.5 5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4z"/>
                      </svg></button>
                    </div>
                    <input id="inputtxt" type="text" class="form-control" placeholder="" aria-label="" aria-describedby="basic-addon1">
                  </div>
            </div>
          </div>
        </div>
    </div>
</body>

<script>
    var tag1 = `<div class="list-group-item" ondblclick="this.contentEditable=true;this.className='list-group-item';" onblur="this.contentEditable=false;this.className='list-group-item';" contenteditable="false">Tag</div>`;
    var tag2 = `<div class="list-group-item" ondblclick="this.contentEditable=true;this.className='list-group-item';" onblur="this.contentEditable=false;this.className='list-group-item';" contenteditable="false">`;
    var text = "";


    // Simple list
    let mysortable = Sortable.create(simpleList, { 
        ghostClass: 'blue-background-class',
        animation: 150,
        removeOnSpill: true
    });
    
    $(document).on('click', '.add-el', function(){
    var lst = $('#simpleList');
    lst.append(tag1);
    });

    $(document).on('click', '.copyclipboard', function(){
    var lst = $('#simpleList');
    text = "";

    for (let item of lst[0].children){
        text+=item.firstChild.textContent + ',';
    }
    navigator.clipboard.writeText(text);
    });

    $(document).on('click', '.cleartags', function(){
      var lst = $('#simpleList');
    lst[0].innerHTML = "";
    });


    $(document).on('click', '#readtext', function(){
    var lst = $('#simpleList');
    var txt = $('#inputtxt');
    let txtvalue = txt[0].value;
    txt[0].value = ""
    
    split = txtvalue.split(',')
    text = "";

    for (let item of split){
        if (item.charAt(0) == ' '){
            item = item.substring(1);
        }
        if (item.substring(item.length -1) == ' '){
            item = item.substring(0, item.length -1);
        }
        text+='\n' + tag2 + item + '</div>'
    }

    lst[0].innerHTML+= text;

    });

    $("#input-id").rating({
    'containerClass': 'str_container',
    'showCaption': false,
    'keyboardEnabled': false,
    'step': 0.5,
    'stars': 10,
    'size':'xs'});


</script>